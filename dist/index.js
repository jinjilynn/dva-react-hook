!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.dva_react_hook=e(require("react")):t.dva_react_hook=e(t.react)}(this,function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(e,r){e.exports=t},function(t,e,r){"use strict";r.r(e);var n=r(0),o=r.n(n),a={inner:Symbol(),StateContext:o.a.createContext(),DispatchContext:o.a.createContext(),MODELS:{},REFRESH_CACHE:{},runtime_state:void 0};function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(r,!0).forEach(function(e){u(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t,e){if(!a.runtime_state&&(a.runtime_state=t),e.inner===a.inner)switch(e.type){case"add":return a.runtime_state=c({},a.runtime_state,u({},e.name,e.initdate)),a.runtime_state;case"coverSet":if(a.runtime_state=c({},a.runtime_state,u({},e.name,e.data)),!e.cancelUpdate)Object.values(a.REFRESH_CACHE).forEach(function(t){if(t){var r=t._s.split("/");e.name===r[0]&&t.set(Math.random())}});return t;case"updateSet":for(var r=e.name.split("/"),n=r.length,o=a.runtime_state,i=0;i<n;)i===n-2&&(o[r[i]][r[i+1]]=e.data),o=o[r[i]],i+=1;if(!e.cancelUpdate)Object.values(a.REFRESH_CACHE).forEach(function(t){t&&e.name===t._s&&t.set(Math.random())});return t;default:throw new Error("Unhandled action type: ".concat(e.type))}else{if("string"!=typeof e.name)throw new Error("name must be a string");if(!a.runtime_state.hasOwnProperty(e.name))throw new Error("you dont not have the state name -- ".concat(e.name," right now !"));var f="function"==typeof e.data?e.data():e.data;switch(e.type){case"set":if(a.runtime_state=c({},a.runtime_state,u({},e.name,f)),!e.cancelUpdate)Object.values(a.REFRESH_CACHE).forEach(function(t){t&&t._s.split("/").includes(e.name)&&t.set(Math.random())});return t;default:throw new Error("Unhandled action type: ".concat(e.type))}}}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function d(t){return a.runtime_state=void 0,t}var m=function(t){var e=t.children,r=y(t,["children"]),n=p(o.a.useReducer(f,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(r,!0).forEach(function(e){s(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},r),d),2),i=n[0],c=n[1];return o.a.createElement(a.StateContext.Provider,{value:i},o.a.createElement(a.DispatchContext.Provider,{value:c},e))};var b=function(){var t=o.a.useContext(a.StateContext);if(void 0===t)throw new Error("useHState hook must be used within a Provider");!a.runtime_state&&(a.runtime_state=t)};function h(){var t=o.a.useContext(a.DispatchContext);if(void 0===t)throw new Error("useDispatcher must be used within a Provider");return t}function v(t,e){if("string"!=typeof t)throw new Error("name must be a string");if(-1===t.indexOf("/"))return[Object.create({get value(){return g(a.runtime_state[t],!0)}}),function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.cancelUpdate,i=n.callbacks;if(e({type:"coverSet",name:t,data:r,inner:a.inner,cancelUpdate:o}),i&&a.MODELS[t]){var c=a.MODELS[t],u=c.callbacks,f=g(a.runtime_state[t],!0);O(u,i,f)}}];var r=t.split("/");return[Object.create({get value(){return w(r)}}),function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.cancelUpdate,c=o.callbacks;if(e({type:"updateSet",name:t,data:n,inner:a.inner,cancelUpdate:i}),c&&a.MODELS[r[0]]){var u=a.MODELS[r[0]],f=u.callbacks,l=w(r);O(f,c,l)}}]}function O(t,e,r){"[object Object]"===Object.prototype.toString.call(t)?("string"==typeof e&&"function"==typeof t[e]&&t[e](r),Array.isArray(e)&&e.forEach(function(e){"function"==typeof t[e]&&t[e](r)})):console.error("the callbacks of model must be an Object type")}function w(t){for(var e,r=0;r<t.length;){if(0===t[r].length)throw new Error("property among the ".concat(t.length," properties -- ").concat(t.join(",")," cannot be an empty string"));if(e=0===r?a.runtime_state[t[0]]:e[t[r]],r!==t.length-1&&"[object Object]"!==Object.prototype.toString.call(e))throw new Error("".concat(t[r]," is not object, so the property['").concat(t[r+1],"'] can not be reached,please check your code first"));r+=1}return g(e,!0)}function g(t,e){return"[object Object]"!==Object.prototype.toString.call(t)?t:function t(e,r){var n,o;"boolean"==typeof r?(n=2,o=r):(n=1,o=!0);for(var a=n;a<arguments.length;a++){var i=arguments[a];if(i)for(var c in i)o&&i[c]&&i[c].constructor===Object?e[c]&&e[c].constructor!==Object?e[c]=i[c]:(e[c]=e[c]||{},t(e[c],o,i[c])):e[c]=i[c]}return e}({},e,t)}function j(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(t,e){if("string"!=typeof t)throw new Error("useModel's argument must be a string");b();var r=j(o.a.useState(Math.random()),2),n=(r[0],r[1]);o.a.useEffect(function(){var r="$$track_uid".concat(Math.random().toString().replace(/./,""));return!e&&(a.REFRESH_CACHE[r]={_s:t,set:n}),function(){!e&&function(t){delete a.REFRESH_CACHE[t]}(r)}},[]);var i=h();return v(t,i)}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(r,!0).forEach(function(e){_(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function x(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function A(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function D(t){if("[object Object]"!==Object.prototype.toString.call(t))throw new Error("action in useDispatch must be an Object");if(!t.hasOwnProperty("type"))throw new Error('action in useDispatch must have a property named "type"');if("string"!=typeof t.type)throw new Error("your must be a string");if(-1===t.type.indexOf("/"))throw new Error("you must do some effects in your type");b();var e=h(),r=t.type,n=A(t,["type"]);if(0===(r=r.split("/"))[0].length)throw new Error("can not resolve the empty model name");var o=a.MODELS[r[0]];if(!o)throw new Error("can not find the Model named ".concat(r[0]));if(!o.hasOwnProperty("effects"))throw new Error("can not find the effects in the Model ".concat(r[0]));var i=o.effects;if("[object Object]"!==Object.prototype.toString.call(i))throw new Error("effects must be an Object");var c=i[r[1]];if("function"!=typeof c)throw new Error("the effect named ".concat(r[1]," must be a function"));var u=o.callbacks;return function(){var t,o=(t=regeneratorRuntime.mark(function t(){var o,i,f,l=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(o=l.length,i=new Array(o),f=0;f<o;f++)i[f]=l[f];return t.t0=c,t.t1=void 0,t.t2=i,t.t3=S,t.t4={},t.t5=n,t.t6=Object,t.t7={get value(){return g(a.runtime_state[r[0]],!0)}},t.t8=t.t6.create.call(t.t6,t.t7),t.t9=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.cancelUpdate,i=n.callbacks;if(e({type:"set",name:r[0],data:t,cancelUpdate:o}),i){var c=g(a.runtime_state[r[0]],!0);O(u,i,c)}},t.t10=function(t){return v(t,e)},t.t11={state:t.t8,setState:t.t9,select:t.t10},t.t12=(0,t.t3)(t.t4,t.t5,t.t11),t.t13=[t.t12],t.t14=t.t2.concat.call(t.t2,t.t13),t.abrupt("return",t.t0.apply.call(t.t0,t.t1,t.t14));case 17:case"end":return t.stop()}},t)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function i(t){x(a,n,o,i,c,"next",t)}function c(t){x(a,n,o,i,c,"throw",t)}i(void 0)})});return function(){return o.apply(this,arguments)}}()}function k(){return(k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var M=function(t,e){return function(r){return function(n){b();var a=C(E(t),2),i=a[0].value,c=a[1],u=e?D(e):null;return o.a.createElement(r,k({hookState:i,setHookState:c,dispatch:u},n))}}};function R(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function H(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function U(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var I=function(t){var e=U(o.a.useState({mounted:!1,component:null}),2),r=e[0],n=e[1],i=h();b();var c=t.models,u=t.renderBefore,f=t.render,l=t.component,s=H(t,["models","renderBefore","render","component"]);return o.a.useEffect(function(){"function"==typeof u&&u();var t,e="function"==typeof c?c():Array.isArray(c)?c.map(function(t){return Promise.resolve(t)}):[],r=Promise.resolve(null);"function"==typeof f&&"Promise"!==(r=f()).constructor.name&&(r=Promise.resolve(r)),l&&(r=Promise.resolve(l)),t=[].concat(R(e),[r]),Promise.all(t).then(function(t){var r=e.length;t.slice(0,r).forEach(function(t,e){t=t.default||t,Array.isArray(t)||(t=[t]),t.map(function(t){return function(t,e){if("[object Object]"!==Object.prototype.toString.call(t))throw new Error("your model must be an object");if(!t.hasOwnProperty("name"))throw new Error("please name your model !!!!");if("string"!=typeof t.name)throw new Error("please make sure your model name is a string");if(0===t.name.length)throw new Error("name can not be empty");if(a.runtime_state.hasOwnProperty(t.name)&&console.warn("registed failed, ".concat(t.name," model has been registed,please change another name")),!a.MODELS[t.name]&&!a.runtime_state.hasOwnProperty(t.name)){a.MODELS[t.name]=t;var r={};t.hasOwnProperty("init")&&(r=t.init),"function"==typeof t.init&&(r=t.init()),e({type:"add",name:t.name,initdate:r,inner:a.inner})}}(t,i)})});var o=t[r].default||t[r];n({mounted:!0,component:o})})},[]),r.mounted?r.component.$$typeof?r.component:o.a.createElement(r.component,s):null};function L(t,e,r){if("string"!=typeof t)throw new Error("name must be a string");if(0===t.length)throw new Error("name can not be empty");b();var n=h();if(void 0===a.runtime_state||void 0===n)throw new Error("useAdd must be used within a Provider");a.runtime_state.hasOwnProperty(t)&&console.warn("you have already added the state name -- ".concat(t,"  before !"));var i=e;"function"==typeof e&&(i=e()),o.a.useEffect(function(){n({type:"add",name:t,initdate:i,inner:a.inner})},r?[]:void 0)}r.d(e,"Provider",function(){return m}),r.d(e,"connect",function(){return M}),r.d(e,"Dynamic",function(){return I}),r.d(e,"useAdd",function(){return L}),r.d(e,"useDispatch",function(){return D}),r.d(e,"useModel",function(){return E});e.default=m}])});